<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="action_customs_order" model="ir.actions.act_window">
            <field name="name">通关清单</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">customs_center.customs_order</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="customs_order_tree" model="ir.ui.view">
            <field name="name">Customs Customs Order tree view</field>
            <field name="model">customs_center.customs_order</field>
            <field name="arch" type="xml">
                <tree default_order="create_date desc">
                    <field name="name" string="通关清单号"/>
                    <field name="work_sheet_id" string="工作单号"/>
                    <field name="inout" string="进出口类型"/>
                    <field name="business_company_id" string="收发货人"/>
                    <field name="custom_master_id" string="申报地海关"/>
                    <field name="create_uid" readonly="1" string="创建人"/>
                </tree>
            </field>
        </record>

        <record id="customs_order_form" model="ir.ui.view">
            <field name="name">Customs Customs Order form</field>
            <field name="model">customs_center.customs_order</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="generate_customs_declaration" string="生成报关单" type="object" class="oe_highlight"/>
                        <!--<button name="generate_customs_declaration" string="生成报关单" type="object" class="oe_highlight"-->
                                <!--attrs="{'invisible':[('customs_declaration_ids','!=','')]}"/>-->
                        <!--<field name="customs_order_state" widget="statusbar" statusbar_visible="draft,succeed"-->
                               <!--statusbar_colors="{'draft':'blue', 'succeed':'green', 'failure':'red'}"/>-->
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                                <field name="customs_declaration_ids" invisible="1"/>
                            </h1>
                        </div>
                        <div class="oe_button_box" name="button_box">
                            <button name="%(customs_center.action_customs_declaration)d" type="action"  context="{'search_default_customs_order_id': active_id}"
                                    class="oe_stat_button" icon="fa-align-justify">
                                <field name="custom_count" widget="statinfo" string="报关单"/>
                            </button>

                            <!--<button name="action_get_attachment_view" class="oe_stat_button" icon="fa-book" type="object">-->
                                <!--<field name="attachment_number" widget="statinfo" string="附件上传"/>-->
                            <!--</button>-->
                        </div>


                        <group col="3" colspan="1">
                            <group>
                                <field name="custom_master_id" required="1" string="申报地海关" options="{'no_create_edit': 1, 'no_create': True}"/>
                            </group>
                            <group>
                                <field name="business_type"  string="业务类型" invisible="1"/>
                                <field name="work_sheet_id"  string="工作单号"/>
                                <!--<field name="create_date" readonly="1"/>-->
                            </group>
                            <group>
                                <field name="create_uid" readonly="1" string="创建人"/>
                            </group>
                        </group>
                        <notebook>
                                <page string="报关信息">
                                    <group col="3" colspan="1">
                                        <group>
                                            <field name="inout" string="进出口类型"/>
                                            <field name="customs_id" string="进出口岸"/>
                                            <!--<field name="customMaster_id" string="申报海关"/>-->
                                            <field name="ManualNo" string="备案号"/>
                                            <field name="customer_contract_no" string="合同号"/>
                                            <field name="licenseNo" string="许可证号"/>
                                            <field name="business_company_id" string="收发货人"/>
                                            <field name="input_company_id" string="生产消费单位"/>
                                        </group>
                                        <group>
                                            <field name="declare_company_id" string="申报单位"/>
                                            <field name="transport_mode_id" string="运输方式"/>
                                            <field name="transport_name" string="运输工具"/>
                                            <field name="VoyageNo" string="航次号"/>
                                            <field name="trade_terms_id" string="成交方式"/>
                                            <field name="trade_mode_id" string="监管方式"/>
                                            <field name="CutMode_id" string="征免性质"/>
                                            <field name="packing_id" string="包装方式"/>
                                        </group>
                                        <group>
                                            <field name="trade_country_id" string="贸易国别"/>
                                            <field name="origin_arrival_country_id" string="启运抵达国"/>
                                            <field name="port_id" string="装货/指运港"/>
                                            <field name="region_id" string="境内目的/货源地"/>
                                            <field name="qty" string="件数"/>
                                            <field name="gross_weight" string="毛重(KG)"/>
                                            <field name="net_weight" string="净重(KG)"/>
                                            <field name="marks" string="备注"/>
                                        </group>
                                    </group>
                                </page>
                            </notebook>

                            <notebook>
                                 <page string="商品列表">
                                    <field name="cus_goods_list_ids" mode="tree">
                                        <tree string="cus_goods_list_tree" editable="bottom">
                                            <field name="cus_goods_tariff_id" string="商品编码"/>
                                            <field name="goods_name" string="商品名称"/>
                                            <field name="goods_model" string="规格型号"/>
                                            <field name="deal_qty" string="成交数量"/>
                                            <field name="deal_unit_price" string="成交单价"/>
                                            <field name="deal_unit" string="成交单位"/>
                                            <field name="deal_total_price" string="成交总价"/>
                                            <field name="currency_id" string="币制"/>
                                            <field name="first_qty" string="第一数量"/>
                                            <field name="first_unit" string="第一单位"/>
                                            <field name="second_qty" string="第二数量"/>
                                            <field name="second_unit" string="第二单位"/>
                                            <field name="origin_country_id" string="原产国"/>
                                            <field name="destination_country_id" string="目的国"/>
                                            <field name="duty_mode_id" string="征免方式"/>
                                            <!--<field name="create_uid" string="创建人" readonly="1"/>-->
                                            <!--<field name="create_date" string="创建时间" readonly="1" widget="date"/>-->
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"
                               widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>



        <!--扩展工作单视图-->
        <!-- Inherit Form View to Modify it -->
        <record id="view_customs_work_sheet_form_extend" model="ir.ui.view">
            <field name="name">work customs sheet form extend</field>
            <field name="model">work_sheet</field>
            <field name="inherit_id" ref="service_center.view_work_sheet_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@class='row']" position="inside">
                    <div class="col-md-1" attrs="{'invisible': [('state', '=', 'cancel')]}">
                        <field name="custom_center" attrs="{'readonly': [('state', '=', 'confirmed')]}"/>
                        <label for="custom center" string="报关"/>
                    </div>
                </xpath>

                <xpath expr="//button[@c_name='warehouse']" position="before">
                    <button name="customs_center_clearance" type="object" class="oe_stat_button" string="关务中心"
                            attrs="{'invisible': ['|', ('custom_center','=',False), ('state', '=', 'cancel')]}" icon="fa-pencil-square-o">
                    </button>
                </xpath>

            </field>
        </record>


    </data>
</odoo>